{% extends 'songs/base.html' %}
{% block title %}{{ user.get_full_name }}{% endblock %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static "accounts/account_styles.css" %}">

    <style media="screen">

        #my-courses {
            max-height: 200px;
        }

        {{ request.user.settings.account_theme.as_css | safe }}

    </style>
{% endblock head %}

{% block breadcrumbs %}
    <li class="breadcrumb-item"><a href="{% url 'accounts:profile' %}">Min profil</a></li>
{% endblock %}

{% block body %}
    <div class="">

        <div id="title" class="text-center">
            <h1>{{ user }}</h1>
        </div>

        <div class="row mt-2">
            <div class="col-md-7 mt-2">
                <div class="default-theme user-theme">
                    <h4>Personlig informasjon:</h4>
                    <p>
                        <div>Email: {{ user.email }}</div>
                        <div>Mobil: {{ user.phone_number }}</div>
                        <hr class="border border-light">
                        <div>Antall kurs som lead: {{ user.lead_courses.count }}</div>
                        <div>Antall kurs som follow: {{ user.follow_courses.count }}</div>
                    </p>
                </div>
            </div>

            <div class="col-md mt-2">

                <div class="btn btn-dark btn-block btn-sm" data-toggle="collapse" data-target="#my-courses" aria-expanded="false" aria-controls="my-courses">
                    Mine kurs ({{ courses.count }})
                    <i class="lni-chevron-down cursor-pointer" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                </div>

                <div id="my-courses" class="collapse">
                    <div class="overflow-auto default-theme user-theme rounded-top p-3">
                        {% for course in courses %}
                            <div class="">
                                <a href="{% url 'courses:course_view' course.id %}">{{ course }}</a>
                            </div>
                        {% endfor %}
                    </div>
                </div>

            </div>
        </div>


        <div class="text-right mt-4">
            <a class="btn btn-secondary" href="{% url 'accounts:settings' %}">Innstillinger</a>
            <a class="btn btn-secondary" href="{% url 'accounts:edit_profile' %}">Rediger profil</a>
            <a class="btn btn-danger" href="/accounts/logout">Logg ut</a>
        </div>

    </div>
{% endblock %}
